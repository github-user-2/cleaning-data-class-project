Code Book for Analysis of "Human Activity Recognition Using Smartphones Data Set"
=================================================================================

This file describes the transformations applied to the Human Activity
Recognition Using Smartphones Data Set and the format of the output
generated by the run_analysis.R script.

Source data
-----------
If the source data is not present in the working directory then it is first
retrieved.  This done in the following steps:

1.  If the `UCI HAR Dataset` directory is not present in the working directory
    and the `getdata-projectfiles-UCI HAR Dataset.zip` file is not present, then
    the `getdata-projectfiles-UCI HAR Dataset.zip` file is downloaded from:
   
    https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip
   
2.  After the `getdata-projectfiles-UCI HAR Dataset.zip` has been downloaded
    then it is unzipped into the `UCI HAR Dataset` directory.

The files in the source data used for the transformation are:

*   `activity_labels.txt` --- A table that maps activity codes to
    activity labels
*   `features.txt` --- A table of feature names along with their column index
    in the `X_train.txt` and `X_test.txt` data sets
*   `train/subject_train.txt` --- Each row identifies the subject who performed
    the activity for each window sample. Its range is from 1 to 30.
*   `train/X_train.txt` --- Training set of measured data
*   `train/y_train.txt` --- Activity codes determined for the training data
*   `test/subject_test.txt` --- Each row identifies the subject who performed
    the activity for each window sample. Its range is from 1 to 30.
*  `test/X_test.txt` --- Test set of measured data
*  `test/y_test.txt` --- Activity codes determined for the test data

Transformation
--------------
Once the source data is in the working directory, the run_analysis.R script
performs the following transformations:

1.  The source files (`activity_labels.txt`, `features.txt`,
    `train/subject_train.txt`, `train/X_train.txt`, `train/y_train.txt`,
    `test/subject_test.txt`, `test/X_test.txt`, `test/y_test.txt`) are each
    loaded into a separate data frame.
2.  The features data frame (loaded from `features.txt`) is filtered to select
    just the columns whose names contain "mean()" and "std()".  This data
    frame is stored in the `filtered_features` variable.
3.  The training data frames are combined with the corresponding test data
    frames, with the training data coming before the test data (e.g, the data
    from `X_train.txt` and `X_test.txt` are combined into a single `all_x` data
    frame).
4.  The `all_X` data frame is filtered using the indexes in filtered_features,
    so that only features with labels that contain "mean()" or "std()" are kept.
    This is so that only the mean and standard deviation data is kept from the
    original data sets.  This filtered data frame is stored as `filtered_x`.
5.  The column names of the `filtered_x` data frame are labelled using the
    values from the `filtered_features` data frame.
6.  The subject, filtered X, and Y data frames (`all_subjects`, `filtered_x`,
    and `all_y` data frames, respectively) are combined into a single
    `means_and_stds` data frame.
7.  The `activity_labels` data frame, which contains the activity code llokup
    table loaded from `activity_labels.txt` is merged with the `means_and_stds`
    data frame so that all rows have the corresponding activity label.  The
    activity code column is then dropped from the `means_and_stds` data frame
    (since that data is now found in the activity label).
8.  The averages of all the values in the `means_and_stds` data frame is
    computed, grouped by activity label and subject ID.  The result is tored
    in the `averages_by_activity_and_subject` data frame.
9.  The `averages_by_activity_and_subject` data frame is written to the
    `averages_by_activity_and_subject` text file.

Output
------
The script produces two main output variables: `means_and_stds` and
`averages_by_activity_and_subject`.  In addition, the
`averages_by_activity_and_subject` table is written to the
`averages_by_activity_and_subject.txt` file.

The following sections describe the format of these variables.

### means_and_stds

This data frame contains the mean and standard deviation features from the
original data set, matched with the subject ID and activity label.

* SubjectID --- ID of the test subject for this row.  Subject IDs range from 1 to 30.
* tBodyAcc-mean()-X
* tBodyAcc-mean()-Y
* tBodyAcc-mean()-Z
* tBodyAcc-std()-X
* tBodyAcc-std()-Y
* tBodyAcc-std()-Z
* tGravityAcc-mean()-X
* tGravityAcc-mean()-Y
* tGravityAcc-mean()-Z
* tGravityAcc-std()-X
* tGravityAcc-std()-Y
* tGravityAcc-std()-Z
* tBodyAccJerk-mean()-X
* tBodyAccJerk-mean()-Y
* tBodyAccJerk-mean()-Z
* tBodyAccJerk-std()-X
* tBodyAccJerk-std()-Y
* tBodyAccJerk-std()-Z
* tBodyGyro-mean()-X
* tBodyGyro-mean()-Y
* tBodyGyro-mean()-Z
* tBodyGyro-std()-X
* tBodyGyro-std()-Y
* tBodyGyro-std()-Z
* tBodyGyroJerk-mean()-X
* tBodyGyroJerk-mean()-Y
* tBodyGyroJerk-mean()-Z
* tBodyGyroJerk-std()-X
* tBodyGyroJerk-std()-Y
* tBodyGyroJerk-std()-Z
* tBodyAccMag-mean()
* tBodyAccMag-std()
* tGravityAccMag-mean()
* tGravityAccMag-std()
* tBodyAccJerkMag-mean()
* tBodyAccJerkMag-std()
* tBodyGyroMag-mean()
* tBodyGyroMag-std()
* tBodyGyroJerkMag-mean()
* tBodyGyroJerkMag-std()
* fBodyAcc-mean()-X
* fBodyAcc-mean()-Y
* fBodyAcc-mean()-Z
* fBodyAcc-std()-X
* fBodyAcc-std()-Y
* fBodyAcc-std()-Z
* fBodyAccJerk-mean()-X
* fBodyAccJerk-mean()-Y
* fBodyAccJerk-mean()-Z
* fBodyAccJerk-std()-X
* fBodyAccJerk-std()-Y
* fBodyAccJerk-std()-Z
* fBodyGyro-mean()-X
* fBodyGyro-mean()-Y
* fBodyGyro-mean()-Z
* fBodyGyro-std()-X
* fBodyGyro-std()-Y
* fBodyGyro-std()-Z
* fBodyAccMag-mean()
* fBodyAccMag-std()
* fBodyBodyAccJerkMag-mean()
* fBodyBodyAccJerkMag-std()
* fBodyBodyGyroMag-mean()
* fBodyBodyGyroMag-std()
* fBodyBodyGyroJerkMag-mean()
* fBodyBodyGyroJerkMag-std()
* ActivityLabel --- Activity label for the corresponding measurements.  The possible values are:
    * WALKING
    * WALKING_UPSTAIRS
    * WALKING_DOWNSTAIRS
    * SITTING
    * STANDING
    * LAYING

The mean and standard deviation features are taken unchanged from the original
"Human Activity Recognition Using Smartphones Data Set".  The names of the
columns in the `means_and_stds` data frame are unchanged from that original set.
This is a description of the data, taken from
http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones :

#### Data Set Information

The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data. 

The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain.


### averages_by_activity_and_subject

This data frame contains the data from the `means_and_stds` data frame, with
each column representing the average value of that data grouped by activity
label and subject ID.

* ActivityLabel --- Activity label for the corresponding measurements.  The possible values are:
    * WALKING
    * WALKING_UPSTAIRS
    * WALKING_DOWNSTAIRS
    * SITTING
    * STANDING
    * LAYING
* SubjectID --- ID of the test subject for this row.  Subject IDs range from 1 to 30.
* tBodyAcc-mean()-X
* tBodyAcc-mean()-Y
* tBodyAcc-mean()-Z
* tBodyAcc-std()-X
* tBodyAcc-std()-Y
* tBodyAcc-std()-Z
* tGravityAcc-mean()-X
* tGravityAcc-mean()-Y
* tGravityAcc-mean()-Z
* tGravityAcc-std()-X
* tGravityAcc-std()-Y
* tGravityAcc-std()-Z
* tBodyAccJerk-mean()-X
* tBodyAccJerk-mean()-Y
* tBodyAccJerk-mean()-Z
* tBodyAccJerk-std()-X
* tBodyAccJerk-std()-Y
* tBodyAccJerk-std()-Z
* tBodyGyro-mean()-X
* tBodyGyro-mean()-Y
* tBodyGyro-mean()-Z
* tBodyGyro-std()-X
* tBodyGyro-std()-Y
* tBodyGyro-std()-Z
* tBodyGyroJerk-mean()-X
* tBodyGyroJerk-mean()-Y
* tBodyGyroJerk-mean()-Z
* tBodyGyroJerk-std()-X
* tBodyGyroJerk-std()-Y
* tBodyGyroJerk-std()-Z
* tBodyAccMag-mean()
* tBodyAccMag-std()
* tGravityAccMag-mean()
* tGravityAccMag-std()
* tBodyAccJerkMag-mean()
* tBodyAccJerkMag-std()
* tBodyGyroMag-mean()
* tBodyGyroMag-std()
* tBodyGyroJerkMag-mean()
* tBodyGyroJerkMag-std()
* fBodyAcc-mean()-X
* fBodyAcc-mean()-Y
* fBodyAcc-mean()-Z
* fBodyAcc-std()-X
* fBodyAcc-std()-Y
* fBodyAcc-std()-Z
* fBodyAccJerk-mean()-X
* fBodyAccJerk-mean()-Y
* fBodyAccJerk-mean()-Z
* fBodyAccJerk-std()-X
* fBodyAccJerk-std()-Y
* fBodyAccJerk-std()-Z
* fBodyGyro-mean()-X
* fBodyGyro-mean()-Y
* fBodyGyro-mean()-Z
* fBodyGyro-std()-X
* fBodyGyro-std()-Y
* fBodyGyro-std()-Z
* fBodyAccMag-mean()
* fBodyAccMag-std()
* fBodyBodyAccJerkMag-mean()
* fBodyBodyAccJerkMag-std()
* fBodyBodyGyroMag-mean()
* fBodyBodyGyroMag-std()
* fBodyBodyGyroJerkMag-mean()
* fBodyBodyGyroJerkMag-std()
